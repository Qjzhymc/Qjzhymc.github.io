---
title: 同程数科面试题
author: Yu Mengchi
categories:
  - Interview
  - 面经
tags:
  - Interview
---
  
### 如何解决OOM问题？

---
### gc调优目标
1. 减少GC的停顿时间
 - 选择低延迟的GC收集器，比如G1、ZGC；
 - 调整堆大小，减少GC次数，尤其是Full GC(老年代大一点)；
 - 减少不必要的对象创建；

---
### 多线程一定高性能吗？
- 多线程可能会带来一些问题，比如资源的竞争，如果多个线程需要访问共享资源，可能需要加锁让线程同步，锁机制的话可能会导致线程阻塞，会降低性能；
- 而且线程之间的切换需要操作系统进行上下文保存和恢复，会带来一定的开销；

> 如果可以分解成独立的任务，任务之间没什么依赖那么可以使用多线程。

---
### 跨域
请求地址和目标的地址在不同的源，就会产生跨域问题。

在Nginx的配置文件中可以设置HTTP响应头，允许特定来源或者全部来源的请求
 - 设置允许来自所有域的请求：Access-Control-Allow-Origin *
 - 设置允许的HTTP方法：Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
 - 设置允许的HTTP请求头部：Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
 - 

---
### tcp，udp区别

---
### tcp有哪些机制保证数据准确
1. tcp传输的数据有序列号，接收方收到数据后会发送ACK(确认应答),告诉发送方自己已接收数据的最后序列号；
2. 超时重传机制：发送方如果一段时间内没有收到ACK，会重传；
3. 流量控制：接收方会通知发送方当前缓冲区大小，防止发送方发送过多的数据；
4. 拥塞控制：TCP会根据网络状态动态调整发送速率，减少网络拥塞情况。拥塞算法有慢启动、拥塞避免、快速重传、快恢复；
5. 校验和机制：TCP头有一个校验和字段，检测数据包是否一致。

---
### 3个partition，两个consumer怎么消费
1. range assignor(range分配)：对分区排序，然后将连续的一批分区分给对应的消费者
2. 轮询分配：轮流分配给消费者

---
### dump文件的参数是？
1. 
```shell
jmap -dump:format=b,file=xxx.hprof pid
```

2. 也可以在JVM参数中自动触发堆dump文件
```shell
-XX:+HeapDumpOnOutOfMemeryError -XX:HeapDumpPath=./xxx.hprof
```

---
### 线程池队列和拒绝策略介绍？


---
### 缓存穿透
数据在缓存和数据库中都不存在，会导致数据库负载过高
布隆过滤器：布隆过滤器判断不存在则一定不存在，如果判断存在则有可能存在。
1. 预先加载所有数据到布隆过滤器
2. 有新请求时，先到布隆过滤器查询是否存在，

---
### 大量请求的缓存失效如何解决？

1. 缓存预热

2. 设置不同的过期时间

3. 缓存分级，本地缓存+远程缓存，如果远程缓存失效，再从本地缓存读取

4. 数据库降级


