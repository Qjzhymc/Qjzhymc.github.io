---
title: 百度面试题
author: Yu Mengchi
categories:
  - Interview
  - 面经 
tags:
  - Interview
---

### hadoop用到哪些？hadoop能存关系型数据库吗？
hadoop是一个分布式的计算和存储框架。所以就是可以把数据分布式存储，计算也可以分布式计算随后汇总。
核心部件包括分布式文件系统HDFS和MapReduce。

- HDFS的使用：HDFS是分布式文件系统，在java程序里面可以通过hadoop-client，配置连接地址，通过集群上的文件路径，访问读取文件。
- MapReduce的使用：先写好程序，程序保存到nameNode容器中，javac编译、jar打包、执行、在生成的output文件夹中就有结果了。

Hive是什么？Hive和关系型数据库的区别？

- Hive使用的是Hadoop的HDFS（分布式文件系统），关系数据库使用的是服务器本地的文件系统
- Hive使用的计算模型是mapReduce，关系数据库是自己设计的计算模型
- Hive是为海量数据做数据挖掘设计的，实时性很差，关系数据库是为实时查询的业务设计的。

Hive和HDFS之间的联系？

- Hive是基于Hadoop的一个数据仓库工具，提供sql查询功能。可以将sql语句转化为mapReduce任务进行运行。
- Hive是建立在Hadoop上的数据仓库基础架构，用来进行数据提取转化加载（ETL），是一种可以存储、查询、和分析存储在Hadoop中的大规模数据的机制。可以方便使用sql查询数据。

---
### spark用到哪些？ mapReduce与Spark区别？

会用到Spark做数据分析，每天会生成看板日报数据。从hive表读取数据，处理之后写入MySQL，然后在看板平台连接MySQL数据源配置看板。

看板上有实时的，也有每天更新的：
- 实时的会直接在看板平台连接hive源表，通过SQL查询直接配置指标和维度，每次刷新的时候实时返回结果。这种一般是一些总数、重要的数据会用这种方式展示；
- 每天更新的看板就是通过Spark任务，每天早上生成hive表生成之后，启动Spark任务，执行完之后更新MySQL表，然后展示。这种一般是比较详情的明细数据会用这种方式。

spark是一个大数据分布式处理框架。可以认为是比mapReduce更好更快的模型。

1. MapReduce每个阶段完成后都会把结果写入磁盘，Spark是把数据保存到内存中的；
2. MapReduce会把数据写入HDFS，Spark是用RDD记录数据。可以基于RDD重建丢失数据；
3. 所以MapReduce效率会低很多，Spark效率会更高。

---
### python、java、scala什么情况下用什么语言
1. Python：一般写一些处理表数据的自动化脚本，比如一个表格，读到Python里转成DataFrame，用Numpy比较方便处理；
2. Java：就是后端的服务基本都是用Java；
3. Scala：Scala用的Akka框架，比较适合处理并发任务。也会编译成字节码，一般在写Flink任务会用。

---
### mysql数据库json字段有什么好处，怎么查询json列中某个字段值？和text类型有什么区别

**JSON字段有什么好处：**
可以更方便存储半结构数据

**查询json列的某个字段值：**
```java
SELECT id, browser -> '$.name' as browser FROM events;
```
阿里规范里说表的设计不建议使用text类型，效率低。

**json和text有什么区别：**
- json类型可以更好地查询分析json数据
- text可以存储更大的文本数据

---
### json有什么好处
- 轻量
- 解析和存储快
- 方便接口交互，前后端交互方便

---
### 联合索引，与分别建立索引有什么优势

**什么是最左匹配原则：**
联合索引的最左匹配：如果你的sql语句中用到了联合索引中的最左边的索引，那么这条sql语句就可以利用这个联合索引去进行匹配，但是如果遇到了范围查询就会停止匹配。

**为什么会有最左匹配原则：**
因为联合索引的索引结构里面排在前面的索引字段是全局有序的，排在后面的字段是局部相对有序，就是只有当前面字段固定了，后面的字段才在前面字段固定的基础上是有序的。

**创建联合索引有什么原则：**
创建联合索引时，where子句中使用最频繁的一列放在最左边，这样区分度最高。

**联合索引与分别建立索引有什么优势：**
- 建立联合索引的话，如果查询的列都在索引里，可以覆盖索引，只需要查询索引不需要回表查询，效率会更高；
- 建立联合索引比分别建立索引，索引数量会少，不用维护很多索引；
- 联合索引有最左匹配原则，所以只要查询条件包含了最左边的列，就可以用到联合索引。

---
### 多条件查询的时候为什么要建联合索引而不是建多个单列索引？
同上。

---
### spark宽依赖、窄依赖
spark里面有很多函数，比如map、filter、union、join、groupByKey、partitionBy这些，spark中使用的数据集是RDD，就是说这些函数是作用在RDD数据上的。

- 窄依赖就是指父RDD的每个分区最多只被一个子RDD分区使用，比如一个父RDD对应一个子RDD，就是一对一的依赖关系，不需要跨多个节点进行数据shuffle；
对应的函数比如有map(对每个元素应用一个函数)、filter(根据条件过滤元素)、union(合并两个RDD)这些。父RDD的分区最多被一个子RDD分区所用。
- 宽依赖就是指父RDD的一个分区可能被多个子RDD分区使用，或者一个子RDD分区依赖父RDD的多个分区，需要跨多个节点重新分配数据。对应的函数有groupByKey，partitionBy这些。

> 可以利用缓存尽量减少不必要的宽依赖。

---
### K8s调度任务

k8s中的调度指的是将定义好的pod分配到集群中的合适的节点上运行。

可能会根据资源可用性、节点负载均衡的策略选择。
