---
title: 完美世界面试题
author: Yu Mengchi
categories:
  - Interview
  - 面经
tags:
  - Interview
---

---
### 代码风格？有多层if嵌套怎么解决？
**好的代码风格应该：**
1. 模块化：确保每个模块（函数、类）都只负载一件事，减少耦合性和复杂度，便于测试和维护
2. 错误处理：确保函数能够接受任何数据类型和参数，有异常要及时处理。

**有多层if嵌套的时候应该：**
1. 抽象代码：如果if内的条件很复杂，应该抽象为方法，在if内直接调用方法，提高代码复用性。
2. 提前返回：提前将不合理的情况，先返回。避免后面代码层层嵌套


---
### 用到哪些设计模式
1. 单例模式：保证一个类只有一个实例，并提供全局访问点
2. 工厂模式：定义一个接口，让子类决定实例化那个类。工厂类负责创建对象，而创建的对象具有公共接口
3. 观察者模式：定义了一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖它的对象都会自动更新
4. 装饰器模式：动态地给一个对象添加一些额外的职责，而不需要修改这个对象的类。
5. 适配器模式：将一个类的接口转换成客户希望的另一个接口
6. 策略模式：定义了一系列的算法，将每一个算法封装起来并可以相互替换使用，使得算法可以独立于使用它的客户而改变
7. 模板方法模式：定义一个算法的骨架，将一些步骤延迟到子类中实现，使得子类可以不改变算法的结构即可重定义该算法的某些特定步骤。
8. 组合模式：
9. 迭代器模式：提供一种方法顺序访问一个聚合对象中各个元素，而又不暴露该对象的内部表示
10. 命令模式：






---
### lru怎么实现的？
lru是指最近最少使用算法，是一种常用的缓存淘汰算法。

实现LRU算法的一种常见方式是使用**双向链表**和**哈希表**结合的方式。使用双向链表维护缓存中的所有数据，按照访问时间顺序排序，
头部为最近访问的数据，尾部为最久未被访问的数据，通过哈希表记录每个数据在链表中的位置以及对应的key-value。
当需要访问缓存中的某个数据时，可以先在哈希表中查找对应的节点位置，然后将该节点移动到链表头部，以表示最近访问过该节点。
当缓存容量达到上限时，可以将尾部的节点淘汰掉，以释放缓存空间。


---
### 确保多实例服务内的所有调度服务能在规定时间间隔内执行

可以使用kubernetes CronJob来实现每10分钟执行一次的定时任务。 可以在kubernetes上部署一个CronJob对象，它会自动在
每个指定的时间点启动一个Job对象，Job对象会执行你的task任务。

创建CronJob的具体步骤如下：
1. 创建一个CronJob YAML文件
描述调度规则、Job模板、运行容器对象、运行命令
2. 在kubernetes集群上使用kubectl命令行工具创建CronJob
kubectl apply -f cronjob.yml
执行后，kubernetes会将CronJob对象
