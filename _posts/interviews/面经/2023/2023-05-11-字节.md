---
title: 字节面试题
author: Yu Mengchi
categories:
  - Interview
  - 面经 
tags:
  - Interview
---

### mysql表join连接的过程是什么样的？执行步骤是什么样的？会有什么样的问题？
- 当关联条件的列是被驱动表的索引时，是可以使用join的。
- 但是当使用的是分块嵌套查询时，扫描行数是两张表行数的乘积，扫描行数非常大，会占用大量的系统资源，这个时候是不建议使用join的。
- 如果要使用join，一定要使用小表作为驱动表。什么样的是小表呢？同一条件下两张表哪个检索的数据量小，那张表就是小表。
- 什么是驱动表？当指定了连接条件时，满足条件并记录行数少的表就是驱动表。

### 间隙锁
什么是间隙锁？
- 间隙锁不仅锁定一个记录上的索引，也锁定索引之间的间隙

### 可重复读事务隔离级别的实现原理？
- 读取数据的时候，事务对当前被读取的数据不加锁，并且是快照读；
- 更新数据的时候，事务在更新数据的瞬间，必须对数据加行级排它锁（record lock,gap lock,next-key lock）,直到事务结束才释放。

> 通过间隙锁，mysql可以在可重复读隔离级别解决幻读的问题。

### redis hash数据结构的底层结构？

哈希类型的内部编码有两种：
- ziplist（压缩列表）：ziplist使用更加紧凑的结构实现多个元素的连续存储，所以比hashtable更节省内存。当内部field个数比较少，并且没有大的value时，内部编码是ziplist；
- hashtable（哈希表）：当有value大于64字节，或者field个数超过512个的时候，内部编码会变为hashtable

### binlog有几种格式？

- statement（SBR）:每一条会修改数据的sql都会记录在binlog中
- row（RBR）:不记录sql语句上下文信息，仅保存哪条记录被修改
- mixed（MBR）:statement和row的混合体。

### redis集群主从数据同步会带来什么问题，数据不同步怎么解决？

- 忽略：根据业务特点，如果业务能接收不一致就最好
- 强制读主：使用一个高可用主库提供数据服务，读和写都从主库操作，可以采用缓存来提升系统读性能
- 选择性读主节点：在cache里记录哪些记录发生过写请求，来路由读主还是读从

### redis全量更新和增量更新怎么更新的？


